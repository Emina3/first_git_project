This the code in my  emina_sprint10_lion branch
